<!doctype html>
<html data-framework="vue" class="xxx">
  <head>
    <link rel="manifest" href="./manifest.webmanifest">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-deep_purple.min.css">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#3F51B5"/>

    <meta charset="utf-8">
    <title>Music Player</title>
    <style>
      [v-cloak] { display: none; }
      li.playing {
        font-weight: bold;
      }
      .albumlist {
        column-count: 2;
      }
      .album {
        height: 100%;
        min-height: 10em;
        width: 100%;
      }
    </style>


    <template type="text/x-template" id="audio-player-template">
      <div>
        <audio ref="audio" controls preload id="audio_player">
          <source :src="playHack"/>
          Your browser does not support the audio element.
        </audio>
        <template v-if="currentItem">
          <h1>{{ currentItem.title }}</h1>
          <h3>{{ currentItem.artist }} / {{ currentItem.album }}</h3>
        </template>
      </div>
    </template>
  </head>

  <body>

    <div class="player mdl-layout mdl-js-layout mdl-layout--fixed-drawer
                mdl-layout--fixed-header">
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
          <span class="mdl-layout-title" id="layout-title">{{ current_title }}</span>

          <div class="mdl-layout-spacer"></div>
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
                      mdl-textfield--floating-label mdl-textfield--align-right">
            <label class="mdl-button mdl-js-button mdl-button--icon"
                   for="fixed-header-drawer-exp">
              <i class="material-icons">search</i>
            </label>
            <div class="mdl-textfield__expandable-holder">
              <input class="mdl-textfield__input" type="text" name="sample"
                     id="fixed-header-drawer-exp">
            </div>
          </div>
        </div>
      </header>
      <div class="mdl-layout__drawer">
        <span class="mdl-layout-title" >Music Player</span>
        <nav class="mdl-navigation">
          <a class="mdl-navigation__link" href="">All Artists</a>
          <a class="mdl-navigation__link" href="">All Albums</a>
          <a class="mdl-navigation__link" href="">4 Albums</a>
          <a class="mdl-navigation__link" href="">Configure</a>
        </nav>
      </div>
      <main class="mdl-layout__content">
        <div class="page-content">
          <section>
            <audio-player
                          :current-item="current_item"
                          v-on:ended="playNext"></audio-player> 
            <section class="playlist" 
                     v-show="playlist.length"  v-cloak>
              <ul>
                <li v-for="item in playlist"
                    :key="item.id"
                    :class="{ playing: current_item && current_item.id == item.id}">
                  <label @click="playSong(item)">{{ item.title }}</label>
                </li>
              </ul>
            </section>
            <h2><a href="#front">Choose new albums</a></h2>
            <section class="random_albums" v-show="random_albums.length"  v-cloak>
              <div class="albumlist">
                <img v-for="album in random_albums"
                     class="album"
                     @click="route_playAlbum(album)"
                     :src="album.cover_url"
                     :alt="album.album + ' ' + (album.albumartist || album.artist)"
                     :title="album.album + ' ' + (album.albumartist || album.artist)"
                     />
              </div>
            </section>

            <div xstyle="display:none">
              <button @click="updateDb()" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">Update DB !</button>
            </div>

            <div v-show="loading"
                 v-cloak>
              <div class="mdl-spinner mdl-js-spinner is-active"></div>
              <p>Albums:
              <div id="progress_bar_albums" class="mdl-progress mdl-js-progress"></div>
              </p>
            <p>Songs:
            <div id="progress_bar_items" class="mdl-progress mdl-js-progress"></div>
            </p>
          
        </div>
        <pre>{{ debugzone }}</pre>
        <pre id="log" style="overflow: scroll"></pre>
        </section>
    </div>
    </main>
  </div>


<script src="https://cdn.jsdelivr.net/lodash/4.16.6/lodash.core.min.js"></script>
<script src="https://cdn.jsdelivr.net/vue/2.0.5/vue.min.js"></script>
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
<script src="https://richtr.github.io/NoSleep.js/dist/NoSleep.min.js"></script>
<!-- <script src="js/musicdb.js" type="module"></script>
<script src="js/app.js" type="module"></script> -->
<script src="build/app.js"></script>

</body>
</html>
